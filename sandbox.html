<!-- sandbox script: this one interfaces with Pouch, as opposed to the page in front of the user -->
<html>
	<head>
	</head>
	<body>
		<script src="pouchdb-nightly.js"></script>
		<script>
			var pouchdb = Pouch("http://localhost:5984/temp");
			window.addEventListener("message", function(event){
				console.log("event listener in sandbox popped");
				var command = event.data.command;
				var name = event.data.name || "hello";
				switch(command){
					case "save":
					console.log("command save popped");
					event.source.postMessage({
						name: name,
						html: "walla",
						type: "sandbox"
					}, event.origin);
					break;

					case "load":
					console.log("command load popped");
					event.source.postMessage({
						name: name,
						html: "walla",
						type: "sandbox"
					}, event.origin);
					break;

					case "replto":
					console.log("started replto on sandbox");
					Pouch.replicate("http://localhost:5984/temp", event.data.to);
					break;

					case "replfrom":
					console.log("started replto on sandbox");
					Pouch.replicate(event.data.from, "http://localhost:5984/temp");
					break;

					default:
					console.log("not a valid command");
					console.log(event.data);
					break;
				}
			});
		</script>
	</body>
</html>
